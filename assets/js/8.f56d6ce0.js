(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{363:function(s,a,t){"use strict";t.r(a);var n=t(42),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"_1-安装环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装环境"}},[s._v("#")]),s._v(" 1.安装环境")]),s._v(" "),t("h3",{attrs:{id:"_1-1-gcc环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-gcc环境"}},[s._v("#")]),s._v(" 1.1 gcc环境")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc-c++\n")])])]),t("h3",{attrs:{id:"_1-2-第三方开放包perl库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-第三方开放包perl库"}},[s._v("#")]),s._v(" 1.2 第三方开放包Perl库")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" pcre pcre-devel\n")])])]),t("h3",{attrs:{id:"_1-3-zlib库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-zlib库"}},[s._v("#")]),s._v(" 1.3 zlib库")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" zlib zlib-devel\n")])])]),t("h3",{attrs:{id:"_1-4-openssl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-openssl"}},[s._v("#")]),s._v(" 1.4 openssl")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openssl openssl-devel\n")])])]),t("p",[s._v("以上代码合成一条代码即为：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ yum -y install gcc-c++ \\\n pcre \\\n pcre-devel \\\n zlib \\\n zlib-devel \\\n openssl \\\n openssl-devel\n")])])]),t("h2",{attrs:{id:"_2-下载-nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-下载-nginx"}},[s._v("#")]),s._v(" 2.下载 nginx")]),s._v(" "),t("p",[s._v("如果没有安装过"),t("code",[s._v("wget")]),s._v("先进行安装")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v("\n")])])]),t("p",[s._v("使用"),t("code",[s._v("wget")]),s._v("下载")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://nginx.org/download/nginx-1.18.0.tar.gz "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 目前最稳定的更新包，有别的版本需求可以修改")]),s._v("\n")])])]),t("h2",{attrs:{id:"_3-安装-nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装-nginx"}},[s._v("#")]),s._v(" 3.安装 nginx")]),s._v(" "),t("p",[s._v("解压文件")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf nginx-1.18.0.tar.gz\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf nginx-1.18.0.tar.gz "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 之后这个文件没有用了记得删除")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nginx-1.18.0\n")])])]),t("p",[s._v("使用configure创建一个"),t("code",[s._v("makeFile")]),s._v("文件")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ ./configure\n    --prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --pid-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/run/nginx/nginx.pid "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --lock-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/lock/nginx.lock "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --error-log-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/log/nginx/error.log "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --http-log-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/log/nginx/access.log "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --with-http_gzip_static_module "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --http-client-body-temp-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/temp/nginx/client "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --http-proxy-temp-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/temp/nginx/proxy "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --http-fastcgi-temp-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/temp/nginx/fastcg "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --http-uwsgi-temp-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/temp/nginx/uwsgi "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --http-scgi-temp-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/temp/nginx/scgi "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 有配置需求")]),s._v("\n    \n$ ./configure "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 没有配置需求，后期可以在配置文件修改")]),s._v("\n")])])]),t("p",[s._v("默认配置加载后使用命令编译安装nginx")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),t("h2",{attrs:{id:"_4-启动-nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-启动-nginx"}},[s._v("#")]),s._v(" 4.启动 nginx")]),s._v(" "),t("p",[s._v("编译安装之后生成文件路径在"),t("code",[s._v("/user/local/nginx")]),s._v("当中，需要进入下级的"),t("code",[s._v("sbin")]),s._v("目录启动"),t("code",[s._v("nginx")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /user/local/nginx/sbin\n$ ./nginx\n\n$ /user/local/nginx/sbin/nginx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者直接启动")]),s._v("\n")])])]),t("h2",{attrs:{id:"_5-访问-nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-访问-nginx"}},[s._v("#")]),s._v(" 5.访问 nginx")]),s._v(" "),t("p",[s._v("默认端口：80")]),s._v(" "),t("p",[s._v("注意是否开启了防火墙，特别是云服务器，需要去配置开放 80 端口\n(一般来说服务器都会开放80端口，访问不行就输入下面命令，我没遇到过)")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ firewall-cmd --zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp --permanent\n$ firewall-cmd --reload\n")])])]),t("p",[s._v("本地访问浏览器输入"),t("code",[s._v("localhost")]),s._v("，服务器输入服务器ip即可，查看到默认nginx页面就算成功了")]),s._v(" "),t("h2",{attrs:{id:"_6-常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-常用命令"}},[s._v("#")]),s._v(" 6.常用命令")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ ./nginx -s stop "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭nginx")]),s._v("\n$ ./nginx -s quit "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出nginx")]),s._v("\n$ ./nginx -s reload "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 刷新配置文件重启")]),s._v("\n")])])]),t("h2",{attrs:{id:"_7-开机自启-nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-开机自启-nginx"}},[s._v("#")]),s._v(" 7.开机自启 nginx")]),s._v(" "),t("h4",{attrs:{id:"方法一"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法一"}},[s._v("#")]),s._v(" 方法一")]),s._v(" "),t("p",[s._v("进入"),t("code",[s._v("/lib/systemd/system/")]),s._v("目录并创建编辑"),t("code",[s._v("nginx.service")]),s._v("文件")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /lib/systemd/system/\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" nginx.service\n")])])]),t("div",{staticClass:"language-vi extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[Unit]\nDescription=nginx service\nAfter=network.target \n   \n[Service] \n# 以fork方式从父进程创建子进程，创建后父进程会立即退出\nType=forking\n# 启动当前服务的命令\nExecStart=/usr/local/nginx/sbin/nginx\n# 重启当前服务的命令\nExecReload=/usr/local/nginx/sbin/nginx -s reload\n# 关闭当前服务的命令\nExecStop=/usr/local/nginx/sbin/nginx -s quit\n# 重启间隔时间秒数，默认 10ms\nRestartSec=3\n# 给服务分配独立的临时空间\nPrivateTmp=true \n   \n[Install] \nWantedBy=multi-user.target\n")])])]),t("p",[s._v("加入开机自启动")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" nginx.service\n")])])]),t("p",[s._v("取消开机自启动")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ systemctl disable nginx.service\n")])])]),t("p",[s._v("systemctl 启动/停止/重启nginx")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ systemctl start nginx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 nginx")]),s._v("\n$ systemctl stop nginx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭 nginx")]),s._v("\n$ systemctl restart nginx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启 nginx")]),s._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);